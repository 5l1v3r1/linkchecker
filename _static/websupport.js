(function(b){b.fn.autogrow=function(){return this.each(function(){var e=this;b.fn.autogrow.resize(e);b(e).focus(function(){e.interval=setInterval(function(){b.fn.autogrow.resize(e)},500)}).blur(function(){clearInterval(e.interval)})})};b.fn.autogrow.resize=function(e){var m=parseInt(b(e).css("line-height"),10),r=e.value.split("\n"),p=e.cols,n=0;b.each(r,function(){n+=Math.ceil(this.length/p)||1});b(e).css("height",m*(n+1))}})(jQuery);
(function(b){function e(){b("a.comment-close").live("click",function(a){a.preventDefault();p(b(this).attr("id").substring(2))});b("a.vote").live("click",function(a){a.preventDefault();A(b(this))});b("a.reply").live("click",function(a){a.preventDefault();B(b(this).attr("id").substring(2))});b("a.close-reply").live("click",function(a){a.preventDefault();s(b(this).attr("id").substring(2))});b("a.sort-option").live("click",function(a){a.preventDefault();C(b(this))});b("a.show-proposal").live("click",
function(a){a.preventDefault();a=b(this).attr("id").substring(2);b("#sp"+a).hide();b("#hp"+a).show();b("#pr"+a).slideDown("fast")});b("a.hide-proposal").live("click",function(a){a.preventDefault();a=b(this).attr("id").substring(2);b("#hp"+a).hide();b("#sp"+a).show();b("#pr"+a).slideUp("fast")});b("a.show-propose-change").live("click",function(a){a.preventDefault();a=b(this).attr("id").substring(2);b("#pc"+a).hide();b("#hc"+a).show();a=b("#pt"+a);a.val(a.data("source"));b.fn.autogrow.resize(a[0]);
a.slideDown("fast")});b("a.hide-propose-change").live("click",function(a){a.preventDefault();x(b(this).attr("id").substring(2))});b("a.accept-comment").live("click",function(a){a.preventDefault();D(b(this).attr("id").substring(2))});b("a.delete-comment").live("click",function(a){a.preventDefault();E(b(this).attr("id").substring(2))});b("a.comment-markup").live("click",function(a){a.preventDefault();a=b(this).attr("id").substring(2);b("#mb"+a).toggle()})}function m(){if("asc"==k.substring(0,3)){var a=
k.substring(3);q=function(b,d){return b[a]-d[a]}}else q=function(a,b){return b[k]-a[k]};b("a.sel").attr("href","#").removeClass("sel");b("a.by"+k).removeAttr("href").addClass("sel")}function r(a){b("#ao"+a).hide();b("#ah"+a).show();var c=b.extend({id:a},h),c=b(t(F,c)).hide();c.find('textarea[name="proposal"]').hide();c.find("a.by"+k).addClass("sel");var d=c.find("#cf"+a);d.submit(function(a){a.preventDefault();y(d)});b("#s"+a).after(c);c.slideDown("fast",function(){n(a)})}function p(a){b("#ah"+a).hide();
b("#ao"+a).show();var c=b("#sc"+a);c.slideUp("fast",function(){c.remove()})}function n(a){b.ajax({type:"GET",url:h.getCommentsURL,data:{node:a},success:function(c,d,f){d=b("#cl"+a);f=100;b("#cf"+a).find('textarea[name="proposal"]').data("source",c.source);if(0===c.comments.length)d.html("<li>No comments yet.</li>"),d.data("empty",!0);else{var g=u(c.comments);f=100*c.comments.length;v(g,d);d.data("empty",!1)}b("#cn"+a).slideUp(f+200);d.slideDown(f)},error:function(a,b,f){l("Oops, there was a problem retrieving the comments.")},
dataType:"json"})}function y(a){var c=a.find('input[name="node"]').val(),d=a.find('input[name="parent"]').val(),f=a.find('textarea[name="comment"]').val(),g=a.find('textarea[name="proposal"]').val();""==f?l("Please enter a comment."):(a.find("textarea,input").attr("disabled","disabled"),b.ajax({type:"POST",url:h.addCommentURL,dataType:"json",data:{node:c,parent:d,text:f,proposal:g},success:function(f,g,e){c&&x(c);a.find("textarea").val("").add(a.find("input")).removeAttr("disabled");g=b("#cl"+(c||
d));g.data("empty")&&(b(g).empty(),g.data("empty",!1));a:{f=f.comment;g=z(f);f.children=null;g.data("comment",f);e=b("#cl"+(f.node||f.parent));var k=w(e),l=b(document.createElement("li"));l.hide();for(i=0;i<k.length;i++)if(0>=q(f,k[i])){b("#cd"+k[i].id).parent().before(l.html(g));l.slideDown("fast");break a}e.append(l.html(g));l.slideDown("fast")}b("#ao"+c).find("img").attr({src:h.commentBrightImage});c&&b("#ca"+c).slideUp()},error:function(b,c,d){a.find("textarea,input").removeAttr("disabled");l("Oops, there was a problem adding the comment.")}}))}
function v(a,c){b.each(a,function(){var a=z(this);c.append(b(document.createElement("li")).html(a));v(this.children,a.find("ul.comment-children"));this.children=null;a.data("comment",this)})}function D(a){b.ajax({type:"POST",url:h.acceptCommentURL,data:{id:a},success:function(c,d,f){b("#cm"+a).fadeOut("fast");b("#cd"+a).removeClass("moderate")},error:function(a,b,f){l("Oops, there was a problem accepting the comment.")}})}function E(a){b.ajax({type:"POST",url:h.deleteCommentURL,data:{id:a},success:function(c,
d,f){var g=b("#cd"+a);"delete"==c?g.slideUp("fast",function(){g.remove()}):(g.find("span.user-id:first").text("[deleted]").end().find("div.comment-text:first").text("[deleted]").end().find("#cm"+a+", #dc"+a+", #ac"+a+", #rc"+a+", #sp"+a+", #hp"+a+", #cr"+a+", #rl"+a).remove(),c=g.data("comment"),c.username="[deleted]",c.text="[deleted]",g.data("comment",c))},error:function(a,b,f){l("Oops, there was a problem deleting the comment.")}})}function x(a){b("#hc"+a).hide();b("#pc"+a).show();a=b("#pt"+a);
a.val("").removeAttr("disabled");a.slideUp("fast")}function C(a){a=a.attr("class").split(/\s+/);for(var c=0;c<a.length;c++)"sort-option"!=a[c]&&(k=a[c].substring(2));m();a=new Date;a.setDate(a.getDate()+365);document.cookie="sortBy="+escape(k)+";expires="+a.toUTCString();b("ul.comment-ul").each(function(a,c){var g=w(b(c),!0),g=u(g);v(g,b(c).empty())})}function A(a){if(h.voting){var c=a.attr("id");if(c){var d=0;"u"!=c.charAt(1)&&(d="u"==c.charAt(0)?1:-1);d={comment_id:c.substring(2),value:d};a.hide();
b("#"+c.charAt(0)+("u"==c.charAt(1)?"v":"u")+d.comment_id).show();a=b("div#cd"+d.comment_id);c=a.data("comment");0!==d.value&&c.vote===-1*d.value&&(b("#"+(1==d.value?"d":"u")+"u"+d.comment_id).hide(),b("#"+(1==d.value?"d":"u")+"v"+d.comment_id).show());c.rating+=0===c.vote?d.value:d.value-c.vote;c.vote=d.value;a.data("comment",c);a.find(".rating:first").text(c.rating+" point"+(1==c.rating?"":"s"));b.ajax({type:"POST",url:h.processVoteURL,data:d,error:function(a,b,c){l("Oops, there was a problem casting that vote.")}})}}else l("You'll need to login to vote.")}
function B(a){b("#rl"+a).hide();b("#cr"+a).show();var c=b(t(G,{id:a})).hide();b("#cl"+a).prepend(c).find("#rf"+a).submit(function(c){c.preventDefault();y(b("#rf"+a));s(a)}).find("input[type=button]").click(function(){s(a)});c.slideDown("fast",function(){b("#rf"+a).find("textarea").focus()})}function s(a){b("#rd"+a).slideUp("fast",function(){b(this).remove()});b("#cr"+a).hide();b("#rl"+a).show()}function u(a){a.sort(q);b.each(a,function(){this.children=u(this.children)});return a}function w(a,c){var d=
[];a.children().children("[id^='cd']").each(function(){var a=b(this).data("comment");c&&(a.children=w(b(this).find("#cl"+a.id),!0));d.push(a)});return d}function z(a){if(!a.displayed&&!h.moderator)return b('<div class="moderate">Thank you!  Your comment will show up once it is has been approved by a moderator.</div>');a.pretty_rating=a.rating+" point"+(1==a.rating?"":"s");a.css_class=a.displayed?"":" moderate";var c=b.extend({},h,a),c=b(t(H,c));if(a.vote){var d=1==a.vote?"u":"d";c.find("#"+d+"v"+
a.id).hide();c.find("#"+d+"u"+a.id).show()}if(h.moderator||"[deleted]"!=a.text)c.find("a.reply").show(),a.proposal_diff&&c.find("#sp"+a.id).show(),h.moderator&&!a.displayed&&c.find("#cm"+a.id).show(),(h.moderator||h.username==a.username)&&c.find("#dc"+a.id).show();return c}function t(a,c){function d(a,d){var e=c;b.each(a.split("."),function(){e=e[this]});return d?f.text(e||"").html():e}var f=b(document.createElement("div"));return a.replace(/<([%#])([\w\.]*)\1>/g,function(a,b,c){return d(c,"%"==b?
!0:!1)})}function l(a){b(document.createElement("div")).attr({"class":"popup-error"}).append(b(document.createElement("div")).attr({"class":"error-message"}).text(a)).appendTo("body").fadeIn("slow").delay(2E3).fadeOut("slow")}var q,k;b.fn.comment=function(){return this.each(function(){var a=b(this).attr("id").substring(1),c=COMMENT_METADATA[a],d=c+" comment"+(1==c?"":"s"),e=0<c?h.commentBrightImage:h.commentImage,c=0==c?" nocomment":"";b(this).append(b(document.createElement("a")).attr({href:"#",
"class":"sphinx-comment-open"+c,id:"ao"+a}).append(b(document.createElement("img")).attr({src:e,alt:"comment",title:d})).click(function(a){a.preventDefault();r(b(this).attr("id").substring(2))})).append(b(document.createElement("a")).attr({href:"#","class":"sphinx-comment-close hidden",id:"ah"+a}).append(b(document.createElement("img")).attr({src:h.closeCommentImage,alt:"close",title:"close"})).click(function(a){a.preventDefault();p(b(this).attr("id").substring(2))}))})};var h={processVoteURL:"/_process_vote",
addCommentURL:"/_add_comment",getCommentsURL:"/_get_comments",acceptCommentURL:"/_accept_comment",deleteCommentURL:"/_delete_comment",commentImage:"/static/_static/comment.png",closeCommentImage:"/static/_static/comment-close.png",loadingImage:"/static/_static/ajax-loader.gif",commentBrightImage:"/static/_static/comment-bright.png",upArrow:"/static/_static/up.png",downArrow:"/static/_static/down.png",upArrowPressed:"/static/_static/up-pressed.png",downArrowPressed:"/static/_static/down-pressed.png",
voting:!1,moderator:!1};"undefined"!=typeof COMMENT_OPTIONS&&(h=jQuery.extend(h,COMMENT_OPTIONS));var F='    <div class="sphinx-comments" id="sc<%id%>">      <p class="sort-options">        Sort by:        <a href="#" class="sort-option byrating">best rated</a>        <a href="#" class="sort-option byascage">newest</a>        <a href="#" class="sort-option byage">oldest</a>      </p>      <div class="comment-header">Comments</div>      <div class="comment-loading" id="cn<%id%>">        loading comments... <img src="<%loadingImage%>" alt="" /></div>      <ul id="cl<%id%>" class="comment-ul"></ul>      <div id="ca<%id%>">      <p class="add-a-comment">Add a comment        (<a href="#" class="comment-markup" id="ab<%id%>">markup</a>):</p>      <div class="comment-markup-box" id="mb<%id%>">        reStructured text markup: <i>*emph*</i>, <b>**strong**</b>,         <tt>``code``</tt>,         code blocks: <tt>::</tt> and an indented block after blank line</div>      <form method="post" id="cf<%id%>" class="comment-form" action="">        <textarea name="comment" cols="80"></textarea>        <p class="propose-button">          <a href="#" id="pc<%id%>" class="show-propose-change">            Propose a change &#9657;          </a>          <a href="#" id="hc<%id%>" class="hide-propose-change">            Propose a change &#9663;          </a>        </p>        <textarea name="proposal" id="pt<%id%>" cols="80"                  spellcheck="false"></textarea>        <input type="submit" value="Add comment" />        <input type="hidden" name="node" value="<%id%>" />        <input type="hidden" name="parent" value="" />      </form>      </div>    </div>',
H='    <div id="cd<%id%>" class="sphinx-comment<%css_class%>">      <div class="vote">        <div class="arrow">          <a href="#" id="uv<%id%>" class="vote" title="vote up">            <img src="<%upArrow%>" />          </a>          <a href="#" id="uu<%id%>" class="un vote" title="vote up">            <img src="<%upArrowPressed%>" />          </a>        </div>        <div class="arrow">          <a href="#" id="dv<%id%>" class="vote" title="vote down">            <img src="<%downArrow%>" id="da<%id%>" />          </a>          <a href="#" id="du<%id%>" class="un vote" title="vote down">            <img src="<%downArrowPressed%>" />          </a>        </div>      </div>      <div class="comment-content">        <p class="tagline comment">          <span class="user-id"><%username%></span>          <span class="rating"><%pretty_rating%></span>          <span class="delta"><%time.delta%></span>        </p>        <div class="comment-text comment"><#text#></div>        <p class="comment-opts comment">          <a href="#" class="reply hidden" id="rl<%id%>">reply &#9657;</a>          <a href="#" class="close-reply" id="cr<%id%>">reply &#9663;</a>          <a href="#" id="sp<%id%>" class="show-proposal">proposal &#9657;</a>          <a href="#" id="hp<%id%>" class="hide-proposal">proposal &#9663;</a>          <a href="#" id="dc<%id%>" class="delete-comment hidden">delete</a>          <span id="cm<%id%>" class="moderation hidden">            <a href="#" id="ac<%id%>" class="accept-comment">accept</a>          </span>        </p>        <pre class="proposal" id="pr<%id%>"><#proposal_diff#>        </pre>          <ul class="comment-children" id="cl<%id%>"></ul>        </div>        <div class="clearleft"></div>      </div>    </div>',
G='    <li>      <div class="reply-div" id="rd<%id%>">        <form id="rf<%id%>">          <textarea name="comment" cols="80"></textarea>          <input type="submit" value="Add reply" />          <input type="button" value="Cancel" />          <input type="hidden" name="parent" value="<%id%>" />          <input type="hidden" name="node" value="" />        </form>      </div>    </li>';b(document).ready(function(){e();k="rating";if(0<document.cookie.length){var a=document.cookie.indexOf("sortBy=");
if(-1!=a){var a=a+7,b=document.cookie.indexOf(";",a);-1==b&&(b=document.cookie.length,k=unescape(document.cookie.substring(a,b)))}}m()})})(jQuery);
$(document).ready(function(){$(".sphinx-has-comment").comment();$("div.context").each(function(){var b=$.getQueryParameters(),b=b.q?b.q[0].split(/\s+/):[],m=$(this);$.each(b,function(){m.highlightText(this.toLowerCase(),"highlighted")})});var b=document.location.hash;"#comment-"==b.substring(0,9)&&($("#ao"+b.substring(9)).click(),document.location.hash="#s"+b.substring(9))});
