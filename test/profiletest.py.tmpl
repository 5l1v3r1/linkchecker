#!/usr/bin/env python

# profiling test
import sys,re,profile,pstats
# add the path to linkcheck module if you do not install with distutils
$syspath
import linkcheck
url='http://www.yahoo.de/'
config = linkcheck.Config.Configuration()
config['recursionlevel'] = 5
config['anchors'] = 1
config['internlinks'].append(re.compile(r"^(ftp|https?)://www\.yahoo\.de/"))
# avoid checking of local files (security!)
config["externlinks"].append((re.compile("^file:"), 1))
config.appendUrl(linkcheck.UrlData.GetUrlDataFrom(url, 0))
profile.run("linkcheck.checkUrls(config)", "test.prof")
p = pstats.Stats("test.prof")
p.strip_dirs().sort_stats("time").print_stats(20)
